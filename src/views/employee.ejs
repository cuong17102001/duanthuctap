<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.5/dist/umd/popper.min.js" integrity="sha384-Xe+8cL9oJa6tN/veChSP7q+mnSPaj5Bcu9mPX5F5xIGE0DVittaqT5lorf0EI7Vk" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.min.js" integrity="sha384-kjU+l4N0Yf4ZOJErLsIcvOU2qSb74wXpOhqTvwVx3OElZRweTnQ6d31fXEoRD1Jy" crossorigin="anonymous"></script>
    <style type="text/css">
      .menu{
          width: 100%;
          height: 50px;
          background-color: cornflowerblue;
      }
      .menu a{
        display: flex;
        justify-content: center;
        color: aliceblue;
        text-decoration: none;
      }
      .menu a:hover{
        color: coral;
      }
      .add_employee{
        margin-top: 30px;
      }
    </style>
</head>
<body>
    <% if(role == true){ %>
      <div class="menu">
        <div class="container">
            <div class="row">
              <div class="col-3">
                <a href="/">Nhân Viên</a>
              </div>
              <div class="col-3">
                <a href="/criteria">Quản lý tiêu chí</a>
              </div>
             
            </div>
        </div>
      </div>
     <% } %> 
    <div class="content">
      <div class="container">
        <% if(role == true){ %>
        <a type="button" href="/add-employee" class="btn btn-success add_employee">Thêm nhân viên</a>
        <%}%>
        <select name="" id="ddlViewBy" style="margin-left: 200px;" onchange="selectmonth()">
          <% for(var i=1; i<=12; i++) { let d = new Date(); let month = d.getMonth(); %>
          <option value="/?month=<%=i%>"  <% if(i-1 == month && selectmonth == true){ %> 
            selected 
         <% }else{ %>
          <% if (selectedmont == i){ %>
            selected
            <% } %>
          <% } %>
            >tháng <%=i%></option>
          <% } %>
        </select>

        <table class="table">
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">name</th>
              <th scope="col">point</th>
              <% if(role == true){ %>
              <th scope="col">Action</th>
              <%}%>
            </tr>
          </thead>
          <tbody>
            <% for(var i=0; i<employee.length; i++) { %>

              <tr>
                <th scope="row"> <%= i + 1%></th>
                <td>
                  <% if(role == true){ %>
                    <a href="/criteria-user?id=<%= employee[i].id%>"><%= employee[i].name%></a>
                    <%}else{%>
                      <%= employee[i].name%>
                      <%}%>
                </td>
                <td id="diem">
                  <% for(var index in point_total) {   %>
                    <% if(index == employee[i].id){ %>
                      <%= point_total[index]%>
                      <% break %>
                    <% } %>
                  <% } %>
                <% if(role == true){ %>
                </td>
                <td><a href="/edit-employee?id=<%= employee[i].id%>" class="btn btn-warning">sửa</a> | <a href="/delete-employee?id=<%= employee[i].id%>" class="btn btn-danger">xóa</a></td>
                </tr>
                  <% } %>
           <% } %>
          </tbody>
        </table>
        <a href="/logout" class="btn btn-warning">đăng xuất</a>
      </div>
    </div>
</body>
<script type="text/javascript">
    


    function selectmonth(){
      var e = document.getElementById("ddlViewBy");
      var strUser = e.value;
      console.log(strUser);
      window.location = strUser;
    }

</script>
</html>